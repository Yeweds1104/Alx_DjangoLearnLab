{% extends 'blog/base.html' %} {% block content %}
<h1 class="mb-4">Blog Posts</h1>
{% if user.is_authenticated %}
<a href="{% url 'post_create' %}" class="btn btn-primary mb-4">New Post</a>
{% endif %} {% for post in posts %}
<article class="post-card">
  <h2><a href="{% url 'post_detail' post.pk %}">{{ post.title }}</a></h2>
  <div class="post-meta">
    <span
      >By {{ post.author.username }} | {{ post.published_date|date:"F j, Y"
      }}</span
    >
    {% if post.updated_date != post.published_date %}
    <span>(Updated: {{ post.updated_date|date:"F j, Y" }})</span>
    {% endif %}
  </div>
  <p>{{ post.content|truncatechars:300 }}</p>
  {% if user == post.author %}
  <div class="post-actions">
    <a
      href="{% url 'post_update' post.pk %}"
      class="btn btn-sm btn-outline-secondary"
      >Edit</a
    >
    <a
      href="{% url 'post_delete' post.pk %}"
      class="btn btn-sm btn-outline-danger"
      >Delete</a
    >
  </div>
  {% endif %}
</article>
{% endfor %} {% if is_paginated %}
<div class="pagination">
  {% if page_obj.has_previous %}
  <a href="?page=1" class="btn btn-outline-info">First</a>
  <a
    href="?page={{ page_obj.previous_page_number }}"
    class="btn btn-outline-info"
    >Previous</a
  >
  {% endif %} {% for num in page_obj.paginator.page_range %} {% if
  page_obj.number == num %}
  <a href="?page={{ num }}" class="btn btn-info">{{ num }}</a>
  {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
  <a href="?page={{ num }}" class="btn btn-outline-info">{{ num }}</a>
  {% endif %} {% endfor %} {% if page_obj.has_next %}
  <a href="?page={{ page_obj.next_page_number }}" class="btn btn-outline-info"
    >Next</a
  >
  <a
    href="?page={{ page_obj.paginator.num_pages }}"
    class="btn btn-outline-info"
    >Last</a
  >
  {% endif %}
</div>
{% endif %} {% endblock %}
